<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="screen-orientation" content="landscape" />
    <title>Memory Leak</title>
    <meta
      name="description"
      content="A browser survival game where you navigate a runaway oldskool conventional memory leak, collect cache fragments, and avoid system crashes in a procedurally generated world."
    />
    <meta
      name="keywords"
      content="Memory Leak, browser game, resource management, procedural generation, survival, canvas game"
    />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#0c1016" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Memory Leak | Manage Your RAM" />
    <meta
      property="og:description"
      content="Collect cache fragments and keep your system alive in this immersive minimal browser survival game."
    />
    <meta property="og:image" content="./assets/og-image.jpg" />
    <meta property="og:site_name" content="Memory Leak" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Memory Leak | Manage Your RAM" />
    <meta
      name="twitter:description"
      content="Collect cache fragments and keep your system alive in this immersive minimal browser survival game."
    />
    <meta name="twitter:image" content="./assets/og-image.jpg" />
    <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png" />
    <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg" />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="./assets/favicon-96x96.png"
    />
    <link rel="manifest" href="./assets/site.webmanifest" />
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #0c1016;
      }

      canvas {
        display: block;
        transform: translateZ(0);
        will-change: transform;
        image-rendering: pixelated;
        image-rendering: crisp-edges;
      }

      #gameCanvas {
        position: relative;
        z-index: 1;
      }

      #TouchGamepad {
        overflow: visible;
        border-radius: 50%;
      }

      /* Force landscape for mobile devices under 768px */
      @media screen and (max-width: 767px) {
        html {
          transform: rotate(90deg);
          transform-origin: center center;
          position: absolute;
          width: 100vh;
          height: 100vw;
          top: 50%;
          left: 50%;
          margin-left: -50vh;
          margin-top: -50vw;
        }

        body {
          width: 100vh;
          height: 100vw;
          overflow: hidden;
        }

        #gameCanvas {
          width: 100vh;
          height: 100vw;
        }
      }

      /* Orientation message for portrait mode on mobile */
      #orientation-message {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0c1016;
        z-index: 10000;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: white;
        font-family: sans-serif;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
      }

      @media screen and (max-width: 767px) and (orientation: portrait) {
        #orientation-message {
          display: flex;
        }
      }
    </style>
  </head>

  <body>
    <!-- music by moodmode-->
    <div id="orientation-message">
      <h2>Please rotate your device</h2>
      <p>This game requires landscape orientation</p>
    </div>
    <canvas id="gameCanvas"></canvas>
    <script type="module" src="/src/main.js"></script>
    <script>
      // Force landscape orientation for mobile devices
      if (window.innerWidth < 768) {
        // Try to lock orientation if API is available
        if (screen.orientation && screen.orientation.lock) {
          screen.orientation.lock('landscape').catch(() => {
            // Orientation lock not supported or failed
          })
        } else if (screen.lockOrientation) {
          screen.lockOrientation('landscape')
        } else if (screen.mozLockOrientation) {
          screen.mozLockOrientation('landscape')
        } else if (screen.msLockOrientation) {
          screen.msLockOrientation('landscape')
        }

        // Handle orientation changes
        window.addEventListener('orientationchange', () => {
          setTimeout(() => {
            location.reload()
          }, 100)
        })
      }
    </script>
  </body>
</html>
